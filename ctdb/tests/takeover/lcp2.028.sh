#!/bin/sh

. "${TEST_SCRIPTS_DIR}/unit.sh"

define_test "4 nodes, all healthy/assigned, stays unbalanced"

export CTDB_TEST_LOGLEVEL=3

required_result <<EOF
130.216.30.181 0
130.216.30.180 1
130.216.30.179 2
130.216.30.178 3
130.216.30.177 0
130.216.30.176 1
130.216.30.175 0
130.216.30.174 1
130.216.30.173 0
130.216.30.172 3
130.216.30.171 1
130.216.30.170 3
10.19.99.253 0
10.19.99.252 1
10.19.99.251 0
10.19.99.250 3
EOF

simple_test 0,0,0,0 <<EOF
130.216.30.181 0
130.216.30.180 1
130.216.30.179 2
130.216.30.178 3
130.216.30.177 0
130.216.30.176 1
130.216.30.175 0
130.216.30.174 1
130.216.30.173 0
130.216.30.172 3
130.216.30.171 1
130.216.30.170 3
10.19.99.253 0
10.19.99.252 1
10.19.99.251 0
10.19.99.250 3
EOF
